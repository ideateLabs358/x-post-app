# プロジェクト仕様書：FRファーミング・ボット for Okto Hyperone & defi.app

**バージョン:** 2.0
**最終更新日:** 2025年7月31日

---

## 1. プロジェクトの最終目標

作戦C「FRファーミング」に特化した自動取引ボットを、Hummingbotフレームワーク上で構築する。
このボットは、Okto Hyperone（先物ショート用）とdefi.app（現物ロング用）の2つのプラットフォームを連携させ、デルタニュートラル戦略によって資金調達率（FR）を継続的に獲得することを目的とする。

---

## 2. 戦略の核心（作戦C：FRファーミング）

ボットは以下のロジックに基づき、自律的に稼働する。

### 2.1. 検知 (Detection)
ボットはOkto Hyperone市場を常時スキャンし、各銘柄の資金調達率（FR）を監視する。

### 2.2. 開始条件 (Entry Condition)
ある銘柄の過去24時間における平均FRが、**0.03%以上**を維持した場合、作戦を開始する。

### 2.3. 終了条件 (Exit Condition)
ポジションを保有している銘柄のFRが、**0.01%を下回った**場合、作戦を終了し、ポジションを解消する。

---

## 3. セットアップと実行

### 3.1. 前提条件
- [Docker](https://www.docker.com/)がインストールされていること。
- [Git](https://git-scm.com/)がインストールされていること（特にWindows環境）。

### 3.2. セットアッププロセス

#### ステップ1: Hummingbotの初回起動
以下のコマンドを実行し、Hummingbotのコンテナをバックグラウンドで起動します。
```bash
docker-compose up -d
```

#### ステップ2: コンテナへの接続
起動したHummingbotのDockerコンテナに接続し、クライアント（操作画面）に入ります。
- **Windows (Git Bashを使用):**
  ```bash
  winpty docker attach hummingbot
  ```
- **macOS / Linux:**
  ```bash
  docker attach hummingbot
  ```

#### ステップ3: 初期設定の実行
Hummingbotクライアント内で、以下の設定を行います。
1.  **セキュリティパスワードの設定:** 初回起動時にパスワードの設定を求められます。安全なパスワードを入力してください。
2.  **取引所とウォレットの接続:**
    - `connect hyperliquid` コマンドを実行し、Okto HyperoneのAPIキーとAPIシークレットを設定します。
    - `connect ethereum` コマンドを実行し、defi.appで使用するウォレットの秘密鍵を設定します。（※ `defi.app`は内部的にEthereumベースのDEXを利用するため、このような接続方法となります）

#### ステップ4: カスタム戦略の実装
上記の「作戦C：FRファーミング」のロジックを、Hummingbotのカスタム戦略スクリプトとして実装します。
- 戦略ファイル名: `fr_farming_strategy.py` （仮）
- 実装の詳細については、別途協議の上、開発を進めます。

---

## 4. セキュリティに関する注意

- **APIキーと秘密鍵は絶対に公開しないこと。**
- Hummingbotの`conf`ディレクトリ内に保存される設定ファイルは、`.gitignore`に含まれていることを確認し、バージョン管理システムにコミットしないでください。
- 可能な限り、APIキーにはIPホワイトリストを設定し、アクセス元を制限してください。